add_namespace = protests

country_event = { # Protests Erupt in Capital
	id = protests.100
	title = protests.100.t
	desc = protests.100.d
	picture = GFX_politics_demands

	is_triggered_only = yes
	trigger = {
		NOT = {
			has_country_flag = MD_protest_cooldown
		}
	}
	option = {
		name = protests.100.a
		log = "[GetDateText]: [This.GetName]: protests.100.a executed"
		activate_mission = MD_incoming_revolt
		set_country_flag = MD_protests_began
		every_owned_state = {
			limit = {
				is_capital = yes
			}
			force_enable_resistance = ROOT
			start_resistance = yes
			set_compliance = 30
			set_resistance = 50
			set_garrison_strength = 1.0
		}
		ai_chance = { base = 10 }
	}
}

# Repetitive

country_event = { # Protests Spread
	id = protests.101
	title = protests.101.t
	desc = protests.101.d
	picture = GFX_politics_demands

	is_triggered_only = yes

	trigger = {
		NOT = {
			has_country_flag = MD_protest_cooldown
			all_core_state = {
				has_resistance = yes
			}
		}
	}

	immediate = {
		hidden_effect = {
			random_core_state = {
			limit = {
				has_resistance = no
				NOT = { has_state_flag = MD_dont_protest_again }
			}
			set_state_flag = MD_protests_are_here }
		}
	}

	option = {
		name = protests.101.a
		log = "[GetDateText]: [This.GetName]: protests.101.a executed"
		set_temp_variable = { temp_productivity_change = -50 }
		every_owned_state = {
			limit = {
				is_capital = no
				is_core_of = ROOT
				has_resistance = no
				has_state_flag = MD_protests_are_here
			}
			clr_state_flag = MD_protests_are_here
			force_enable_resistance = ROOT
			start_resistance = yes
			set_compliance = 20
			set_resistance = 60
			newline = yes
			state_flat_productivity_change_effect = yes
		}
		ai_chance = { base = 10 }
	}
}

country_event = { # Regional Protests Put Down
	id = protests.102
	title = protests.102.t
	desc = protests.102.d
	picture = GFX_politics_demands

	is_triggered_only = yes

	trigger = {
		NOT = { has_country_flag = MD_protest_cooldown }
		any_owned_state = {
			is_core_of = ROOT
			compliance > 49
			resistance < 40
		}
	}

	option = {
		name = protests.102.a
		log = "[GetDateText]: [This.GetName]: protests.102.a executed"
		every_owned_state = {
			limit = {
				is_capital = no
				has_resistance = yes
				is_core_of = ROOT
				compliance > 49
				resistance < 40
			}
			cancel_resistance = yes
			set_state_flag = MD_dont_protest_again
		}
		ai_chance = { base = 10 }
	}
}

country_event = { # Protests Die Down Nation-wide
	id = protests.103
	title = protests.103.t
	desc = protests.103.d
	picture = GFX_politics_demands

	is_triggered_only = yes

	trigger = {
		NOT = { has_country_flag = MD_protest_cooldown }
		any_owned_state = {
			has_resistance = yes
		}
	}

	option = {
		name = protests.103.a
		log = "[GetDateText]: [This.GetName]: protests.103.a executed"
		every_owned_state = {
			limit = {
				has_resistance = yes
			}
			cancel_resistance = yes
			clr_state_flag = MD_dont_protest_again
		}
		set_country_flag = {
			flag = MD_protest_cooldown
			days = 1000
			value = 1
		}
		clr_country_flag = MD_protests_began
		ai_chance = { base = 10 }
	}
}


country_event = { # Protesters Set Industrial Assets Ablaze
	id = protests.104
	title = protests.104.t
	desc = protests.104.d
	picture = GFX_politics_demands

	is_triggered_only = yes

	trigger = {
		NOT = { has_country_flag = MD_protest_cooldown }
		any_owned_state = {
			industrial_complex > 0
		}
	}

	option = {
		name = protests.104.a
		log = "[GetDateText]: [This.GetName]: protests.104.a executed"
		random_owned_state = {
			limit = {
				has_resistance = yes
				is_core_of = ROOT
				industrial_complex > 0
			}
			remove_building = {
				type = industrial_complex
				level = 1
			}
		}
		newline = yes
		set_temp_variable = { temp_productivity_change = -50 }
		state_flat_productivity_change_effect = yes
		ai_chance = { base = 10 }
	}

	option = {
		name = protests.104.b
		log = "[GetDateText]: [This.GetName]: protests.104.b executed"
		random_owned_state = {
			limit = {
				has_resistance = yes
				is_core_of = ROOT
				industrial_complex > 0
			}
			damage_building = {
				type = industrial_complex
				damage = 1
			}
		}
		newline = yes
		set_temp_variable = { temp_productivity_change = -25 }
		state_flat_productivity_change_effect = yes
		newline = yes
		set_temp_variable = { treasury_change = -12.5 }
		modify_treasury_effect = yes
		ai_chance = { base = 10 }
	}
}

country_event = { # Protesters Set Business Parks
	id = protests.105
	title = protests.105.t
	desc = protests.105.d
	picture = GFX_politics_demands

	is_triggered_only = yes

	trigger = {
		NOT = { has_country_flag = MD_protest_cooldown }
		any_owned_state = {
			offices > 0
		}
	}

	option = {
		name = protests.105.a
		log = "[GetDateText]: [This.GetName]: protests.105.a executed"
		random_owned_state = {
			limit = {
				has_resistance = yes
				is_core_of = ROOT
				offices > 0
			}
			remove_building = {
				type = offices
				level = 1
			}
		}
		newline = yes
		set_temp_variable = { temp_productivity_change = -50 }
		state_flat_productivity_change_effect = yes
		ai_chance = { base = 10 }
	}

	option = {
		name = protests.105.b
		log = "[GetDateText]: [This.GetName]: protests.105.b executed"
		random_owned_state = {
			limit = {
				has_resistance = yes
				is_core_of = ROOT
				offices > 0
			}
			damage_building = {
				type = offices
				damage = 1
			}
		}
		newline = yes
		set_temp_variable = { temp_productivity_change = -25 }
		state_flat_productivity_change_effect = yes
		newline = yes
		set_temp_variable = { treasury_change = -15.75 }
		modify_treasury_effect = yes
		ai_chance = { base = 10 }
	}
}

country_event = { # Protesters Set Arms Factories
	id = protests.106
	title = protests.106.t
	desc = protests.106.d
	picture = GFX_politics_demands

	is_triggered_only = yes

	trigger = {
		NOT = { has_country_flag = MD_protest_cooldown }
		any_owned_state = {
			arms_factory > 0
			has_resistance = yes
		}
	}

	option = {
		name = protests.106.a
		log = "[GetDateText]: [This.GetName]: protests.106.a executed"
		random_owned_state = {
			limit = {
				has_resistance = yes
				is_core_of = ROOT
				arms_factory > 0
			}
			remove_building = {
				type = arms_factory
				level = 1
			}
		}
		newline = yes
		set_temp_variable = { temp_productivity_change = -50 }
		state_flat_productivity_change_effect = yes
		ai_chance = { base = 10 }
	}

	option = {
		name = protests.106.b
		log = "[GetDateText]: [This.GetName]: protests.106.b executed"
		random_owned_state = {
			limit = {
				has_resistance = yes
				is_core_of = ROOT
				arms_factory > 0
			}
			damage_building = {
				type = arms_factory
				damage = 1
			}
		}
		newline = yes
		set_temp_variable = { temp_productivity_change = -25 }
		state_flat_productivity_change_effect = yes
		newline = yes
		set_temp_variable = { treasury_change = -12.5 }
		modify_treasury_effect = yes
		ai_chance = { base = 10 }
	}
}

country_event = {
	id = protests.200
	title = protests.200.t
	desc = protests.200.d
	picture = GFX_politics_demands

	trigger = {
		NOT = {
			has_country_flag = MD_protest_cooldown
			has_country_flag = MD_protests_began
		}
	}

	is_triggered_only = yes

	option = {
		name = protests.200.a
		log = "[GetDateText]: [This.GetName]: protests.200.a executed"

		ai_chance = { base = 10 }
	}

}
